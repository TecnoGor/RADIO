!function(t){"use strict";let{PI:i,cos:s,sin:a,abs:e,random:h,atan2:c}=Math,r=.5*i,n=t=>t*h(),o=(t,i,s,a)=>c(a-i,s-t),l=(t,i,s)=>(1-s)*t+s*i;window.UT_Coalesce_Effect=class{constructor(i,s){this.container=i,this.config=JSON.parse(this.container.dataset.effectConfig),this.canvas="",this.ctx="",this.center=[],this.simplex="",this.particleProps="",t(this.container).css("mix-blend-mode",this.config.blend_mode),this.createCanvas(),this.resize(),this.initParticles(),this.draw(),s&&"function"==typeof s&&s(this)}createCanvas(){this.canvas={a:document.createElement("canvas"),b:document.createElement("canvas")},this.canvas.b.style="\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n            ",this.container.appendChild(this.canvas.a),this.ctx={a:this.canvas.a.getContext("2d"),b:this.canvas.b.getContext("2d")}}initParticles(){this.particleProps=new Float32Array(6300);let t;for(t=0;t<6300;t+=9)this.initParticle(t)}initParticle(t){let i,e,h,c,r,l,p,d,x,b;e=n(this.canvas.a.width),h=n(this.canvas.a.height),i=o(e,h,this.center[0],this.center[1]),c=6*s(i),r=6*a(i),l=0,p=100+n(500),d=.1+n(1),x=2+n(10),b=this.config.hue.H+n(this.config.rangeHue),this.particleProps.set([e,h,c,r,0,p,d,x,b],t)}drawParticles(){let t;for(t=0;t<6300;t+=9)this.updateParticle(t)}updateParticle(t){let i,e,h,c,n,p,d,x,b,g,v,P,w=1+t,f=2+t,u=3+t,m=4+t,C=5+t,y=6+t,I=7+t,O=8+t;i=this.particleProps[t],e=this.particleProps[w],h=o(i,e,this.center[0],this.center[1])+.75*r,c=l(this.particleProps[f],2*s(h),.05),n=l(this.particleProps[u],2*a(h),.05),p=this.particleProps[m],d=this.particleProps[C],b=i+c*(x=this.particleProps[y]),g=e+n*x,v=this.particleProps[I],P=this.particleProps[O],this.drawParticle(i,e,h,p,d,v,P),p++,this.particleProps[t]=b,this.particleProps[w]=g,this.particleProps[f]=c,this.particleProps[u]=n,this.particleProps[m]=p,p>d&&this.initParticle(t)}drawParticle(t,i,s,a,h,c,r){let n=t-.5*c,o=i-.5*c;this.ctx.a.save(),this.ctx.a.lineCap="round",this.ctx.a.lineWidth=1,this.ctx.a.strokeStyle=`hsla(${r},${this.config.hue.S}%,${this.config.hue.L}%,${((t,i)=>{let s=.5*i;return e((t+s)%i-s)/s})(a,h)})`,this.ctx.a.beginPath(),this.ctx.a.translate(n,o),this.ctx.a.rotate(s),this.ctx.a.translate(-n,-o),this.ctx.a.strokeRect(n,o,c,c),this.ctx.a.closePath(),this.ctx.a.restore()}resize(){const{clientWidth:t,clientHeight:i}=this.container;this.canvas.a.width=t,this.canvas.a.height=i,this.ctx.a.drawImage(this.canvas.b,0,0),this.canvas.b.width=t,this.canvas.b.height=i,this.ctx.b.drawImage(this.canvas.a,0,0),this.center[0]=.5*this.canvas.a.width,this.center[1]=.5*this.canvas.a.height}renderGlow(){this.ctx.b.save(),this.ctx.b.filter="blur(8px) brightness(200%)",this.ctx.b.globalCompositeOperation="lighter",this.ctx.b.drawImage(this.canvas.a,0,0),this.ctx.b.restore(),this.ctx.b.save(),this.ctx.b.filter="blur(4px) brightness(200%)",this.ctx.b.globalCompositeOperation="lighter",this.ctx.b.drawImage(this.canvas.a,0,0),this.ctx.b.restore()}render(){this.ctx.b.save(),this.ctx.b.globalCompositeOperation="lighter",this.ctx.b.drawImage(this.canvas.a,0,0),this.ctx.b.restore()}draw(){this.ctx.a.clearRect(0,0,this.canvas.a.width,this.canvas.a.height),this.ctx.b.fillStyle=this.config.backgroundColor,this.ctx.b.fillRect(0,0,this.canvas.a.width,this.canvas.a.height),this.drawParticles(),this.renderGlow(),this.render()}}}(jQuery);